<main>
  <h1>Frutas similares al lichi</h1>

  <p>
    Una vez afirmé que lichi, rambután y mamoncillo eran básicamente lo mismo.
    Esta página es una respuesta más cuidadosa.
  </p>

  <h2>Contexto taxonómico</h2>

  <p>
    La mayoría de las frutas similares al lichi que se muestran en esta página pertenecen a la familia 
    <strong>Sapindaceae</strong> (familia de las sapindáceas). 
    Esta familia se encuentra dentro del orden <strong>Sapindales</strong>.
  </p>

  <p>
    La familia Sapindaceae contiene aproximadamente 140 géneros y casi 2.000 especies,
    incluyendo many frutas tropicales. Aunque pueden parecer similares, la similitud que comparten
    se debe a relaciones evolutivas a nivel de familia, no de especie.
  </p>

  <h2>Géneros y especies seleccionadas</h2>

  <h3>Sapindaceae (familia de las sapindáceas)</h3>
  <ul>
    <li><a href="https://es.wikipedia.org/wiki/Litchi_chinensis" target="_blank"><em>Litchi chinensis</em></a> — lichi  
        (<a href="https://www.youtube.com/watch?v=JbDL0fQ-Tgg" target="_blank">video comparación</a>)</li>
    <li><a href="https://es.wikipedia.org/wiki/Nephelium_lappaceum" target="_blank"><em>Nephelium lappaceum</em></a> — rambután  
        (<a href="https://www.youtube.com/watch?v=uouRC7GnEXE" target="_blank">video sabor</a>)</li>
    <li><a href="https://es.wikipedia.org/wiki/Nephelium_mutabile" target="_blank"><em>Nephelium mutabile</em></a> — pulasan</li>
    <li><a href="https://en.wikipedia.org/wiki/Melicoccus_bijugatus" target="_blank"><em>Melicoccus bijugatus</em></a> — mamoncillo</li>
    <li><a href="https://es.wikipedia.org/wiki/Dimocarpus_longan" target="_blank"><em>Dimocarpus longan</em></a> — longan</li>
    <li><a href="https://es.wikipedia.org/wiki/Pometia_pinnata" target="_blank"><em>Pometia pinnata</em></a> — korlan / matoa</li>
    <li><a href="https://es.wikipedia.org/wiki/Blighia_sapida" target="_blank"><em>Blighia sapida</em></a> — ackee</li>
    <li><a href="https://es.wikipedia.org/wiki/Paullinia_cupana" target="_blank"><em>Paullinia cupana</em></a> — guaraná</li>
    <li><a href="https://es.wikipedia.org/wiki/Sapindus" target="_blank"><em>Sapindus</em></a> spp. — soapberries</li>
    <li><a href="https://es.wikipedia.org/wiki/Acer" target="_blank"><em>Acer</em></a> spp. — arces</li>
    <li><a href="https://es.wikipedia.org/wiki/Aesculus" target="_blank"><em>Aesculus</em></a> spp. — castaños de indias</li>
    <li><a href="https://es.wikipedia.org/wiki/Schleichera_trijuga" target="_blank"><em>Schleichera trijuga</em></a> — aceite de Macasar</li>
    <li><a href="https://es.wikipedia.org/wiki/Koelreuteria" target="_blank"><em>Koelreuteria</em></a>, 
        <a href="https://es.wikipedia.org/wiki/Cardiospermum" target="_blank"><em>Cardiospermum</em></a>, 
        <a href="https://es.wikipedia.org/wiki/Ungnadia" target="_blank"><em>Ungnadia</em></a> — ornamentales</li>
  </ul>

  <h3>Clusiaceae</h3>
  <ul>
    <li><a href="https://es.wikipedia.org/wiki/Garcinia_mangostana" target="_blank"><em>Garcinia mangostana</em></a> — mangostán</li>
    <li><a href="https://es.wikipedia.org/wiki/Garcinia_gummi-gutta" target="_blank"><em>Garcinia gummi-gutta</em></a> — tamarindo malabar</li>
  </ul>

  <h3>Annonaceae</h3>
  <ul>
    <li><a href="https://es.wikipedia.org/wiki/Annona_muricata" target="_blank"><em>Annona muricata</em></a> — guanábana</li>
    <li><a href="https://es.wikipedia.org/wiki/Annona_squamosa" target="_blank"><em>Annona squamosa</em></a> — chirimoya</li>
    <li><a href="https://es.wikipedia.org/wiki/Annona_reticulata" target="_blank"><em>Annona reticulata</em></a> — atemoya</li>
  </ul>

 <h2>Tabla de distancias taxonómicas</h2>
<p>
Esta tabla compara cuán cercanas están estas especies evolutivamente usando pasos en la clasificación.
Las celdas en rosa señalan frutas dentro de Sapindaceae consideradas “similares al lichi”.
</p>

<table id="distance-table" border="1" style="border-collapse: collapse;">
  <thead>
    <tr>
      <th></th>
      <th>Lichi</th>
      <th>Rambután</th>
      <th>Mamoncillo</th>
      <th>Longan</th>
      <th>Pulasan</th>
      <th>Ackee</th>
      <th>Guaraná</th>
      <th>Soapberries</th>
      <th>Arce</th>
      <th>Castaño de indias</th>
      <th>Mangostán</th>
      <th>Tamarindo malabar</th>
      <th>Guanábana</th>
      <th>Chirimoya</th>
      <th>Atemoya</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const taxa = {
    "Lichi": { order:"Sapindales", family:"Sapindaceae", subfamily:"Sapindoideae", genus:"Litchi", species:"chinensis", lycheeLike:true },
    "Rambután": { order:"Sapindales", family:"Sapindaceae", subfamily:"Sapindoideae", genus:"Nephelium", species:"lappaceum", lycheeLike:true },
    "Mamoncillo": { order:"Sapindales", family:"Sapindaceae", subfamily:"Sapindoideae", genus:"Melicoccus", species:"bijugatus", lycheeLike:true },
    "Longan": { order:"Sapindales", family:"Sapindaceae", subfamily:"Sapindoideae", genus:"Dimocarpus", species:"longan", lycheeLike:true },
    "Pulasan": { order:"Sapindales", family:"Sapindaceae", subfamily:"Sapindoideae", genus:"Nephelium", species:"mutabile", lycheeLike:true },
    "Ackee": { order:"Sapindales", family:"Sapindaceae", subfamily:"Sapindoideae", genus:"Blighia", species:"sapida", lycheeLike:true },
    "Guaraná": { order:"Sapindales", family:"Sapindaceae", subfamily:"Sapindoideae", genus:"Paullinia", species:"cupana", lycheeLike:true },
    "Soapberries": { order:"Sapindales", family:"Sapindaceae", subfamily:"Sapindoideae", genus:"Sapindus", species:"spp", lycheeLike:true },
    "Arce": { order:"Sapindales", family:"Sapindaceae", subfamily:"Hippocastanoideae", genus:"Acer", species:"spp", lycheeLike:false },
    "Castaño de indias": { order:"Sapindales", family:"Sapindaceae", subfamily:"Hippocastanoideae", genus:"Aesculus", species:"spp", lycheeLike:false },
    "Mangostán": { order:"Malpighiales", family:"Clusiaceae", subfamily:"", genus:"Garcinia", species:"mangostana", lycheeLike:false },
    "Tamarindo malabar": { order:"Malpighiales", family:"Clusiaceae", subfamily:"", genus:"Garcinia", species:"gummi-gutta", lycheeLike:false },
    "Guanábana": { order:"Magnoliales", family:"Annonaceae", subfamily:"", genus:"Annona", species:"muricata", lycheeLike:false },
    "Chirimoya": { order:"Magnoliales", family:"Annonaceae", subfamily:"", genus:"Annona", species:"squamosa", lycheeLike:false },
    "Atemoya": { order:"Magnoliales", family:"Annonaceae", subfamily:"", genus:"Annona", species:"reticulata", lycheeLike:false }
  };
  
  const levels = ["order","family","subfamily","genus","species"];
  const tbody = document.querySelector("#distance-table tbody");
  const names = Object.keys(taxa);

  names.forEach(row => {
    const tr = document.createElement("tr");
    const th = document.createElement("th");
    th.textContent = row;
    tr.appendChild(th);

    names.forEach(col => {
      const td = document.createElement("td");
      let d = 0;
      for(let i=levels.length-1;i>=0;i--){
        if(taxa[row][levels[i]] && taxa[row][levels[i]] === taxa[col][levels[i]]){
          d = 2*(levels.length-1-i);
          break;
        }
        d = 2*levels.length;
      }
      td.textContent = d;
      if(taxa[row].lycheeLike && taxa[col].lycheeLike) td.style.backgroundColor="#fde0dc";
      td.title = `Común hasta: ${levels[levels.length - d/2 - 1] || "ninguno"}`;
      tr.appendChild(td);
    });

    tbody.appendChild(tr);
  });
});
</script>

<h2>Árbol taxonómico interactivo</h2>
<div id="tree"></div>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script>
const treeData = {
  name: "Root",
  children: [
    { name: "Sapindales",
      children: [
        { name: "Sapindaceae",
          children: [
            { name: "Sapindoideae", children:[
              { name:"Lichi"},{ name:"Rambután"},{ name:"Mamoncillo"},
              { name:"Longan"},{ name:"Pulasan"},{ name:"Ackee"},
              { name:"Guaraná"},{ name:"Korlan"},{ name:"Soapberries"}
            ]},
            { name:"Hippocastanoideae", children:[
              { name:"Arce"},{ name:"Castaño de indias"}
            ]}
          ]
        }
      ]
    },
    { name: "Malpighiales", children:[
      { name:"Clusiaceae", children:[{name:"Mangostán"},{name:"Tamarindo malabar"}]}
    ]},
    { name: "Magnoliales", children:[
      { name:"Annonaceae", children:[{name:"Guanábana"},{name:"Chirimoya"},{name:"Atemoya"}]}
    ]}
  ]
};

const width = 800, height = 500;
const svg = d3.select("#tree").append("svg")
  .attr("width", width)
  .attr("height", height)
  .append("g").attr("transform","translate(40,0)");

const root = d3.hierarchy(treeData);
const treeLayout = d3.tree().size([height, width-160]);
treeLayout(root);

svg.selectAll('lines')
  .data(root.links())
  .enter()
  .append('line')
  .attr('x1', d=>d.source.y)
  .attr('y1', d=>d.source.x)
  .attr('x2', d=>d.target.y)
  .attr('y2', d=>d.target.x)
  .attr('stroke','#555');

svg.selectAll('nodes')
  .data(root.descendants())
  .enter()
  .append('circle')
  .attr('cx', d=>d.y)
  .attr('cy', d=>d.x)
  .attr('r', 6)
  .attr('fill', d=> d.children ? "#555" : "#fde0dc");

svg.selectAll('labels')
  .data(root.descendants())
  .enter()
  .append('text')
  .attr('x', d=>d.y + 10)
  .attr('y', d=>d.x + 4)
  .text(d=>d.data.name);
</script>


</main>
